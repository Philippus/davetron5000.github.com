
<!DOCTYPE html>
<html language="en"><head>
  <meta charset="utf-8">
  <title>My first iPhone App - Part 1 - naildrivin5.com - David Bryant Copeland's Website</title>
  <meta name="author" content="David Bryant Copeland">
  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/images/favicons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/images/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/images/favicons/ms-icon-144x144.png">

  
  <meta name="description" content="

  
    My first iPhone App - Part 1
    
      June 23, 2010
    
  
  
    Background

Last year, I spent most of my free time becoming familiar...">
  

  
  <link rel="canonical" href="http://naildrivin5.com/blog/2010/06/23/iphone-app-part-1.html">
  <link href="/favicon.png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="naildrivin5.com - David Bryant Copeland's Website" type="application/atom+xml">
  <link href="/css/styles.css" rel="stylesheet">
  <script src="https://use.typekit.net/ylm4zpa.js"></script>
  <script>try{Typekit.load({ async: true });}catch(e){}</script>
            
  <meta name="google-site-verification" content="h_yTpXa6N3ebHj8DYmgX4lIFGHBW1NtGMVHfXuu7i_4" />
</head>
<body>
  <header class="site-header pb2 mb2 center">
    <h1 class="uc ls2 f1"><a href="/">naildrivin5.com</a></h1>
    <h2 class="ls1"><small class="uc h4">Website of</small> David Bryant Copeland</h2>
    <nav>
      <ul>
        <li class="text-c w-1-3"><a class="ib w-100 button" href="/">Blog</a></li>
        <li class="text-c w-1-3"><a class="ib w-100 button" href="/bio">About</a></li>
        <li class="text-c w-1-3"><a class="ib w-100 button" href="/books">Books</a></li>
        <li class="text-c w-1-3"><a class="ib w-100 button" href="/talks">Talks</a></li>
      </ul>
      <div style="clear: both"></div>
    </nav>
  </header>
  <main>
    <section>
      <div>
<article role="article" class="blog-post">
  <header class="border-bottom border-light">
    <h1>My first iPhone App - Part 1</h1>
    <h2 class="f5 ls2 fw-bold mtnone uc ib">
      June 23, 2010
    </h2>
  </header>
  <section class="blog-content">
    <h2>Background</h2>

<p>Last year, I spent most of my free time becoming familiar with Ruby, Rails, and Scala.  I&#39;m by no means an expert, but I&#39;m trying
to follow the advice of the <a href="http://www.pragprog.com">Pragmatic Programmers</a> and learn a new language/system every year.  This year, it&#39;s
going to be the iPhone API and Objective-C.  I coded some WebObjects applications in Objective-C many years ago, so the language
isn&#39;t totally unfamiliar, but the iPhone SDK, obviously, is.  After working my way through the first several
chapters of the <a href="http://pragprog.com/titles/amiphd/iphone-sdk-development">Dudney and Adamson&#39;s &quot;iPhone SDK Development&quot;</a> book, I decided I was ready to try my first real app.</p>

<h2>First App</h2>

<p>My girlfriend and I enjoy wine, but are largely novices.  On a trip to Napa we started writing down the wines we&#39;d tried and keeping personal
ratings of them.  The idea being twofold: try to remember good wines/avoid bad ones, and try to hone in on what our tastes are.  There are
so many wines and so many flavors and smells, it&#39;s just impossible to keep in your head.  So, I created a Google Spreadsheet and a form to allow us to enter wines on the go, via our smart phones.  The Goolge Docs form is less than usable, and this seems like the perfect job for a native iPhone app.</p>

<h3>User Experience</h3>

<p>Aside from learning the ins and outs of the SDK, another main goal is focus on making a highly-usable application (at least for myself and my girlfriend).  So, before diving into Core Data and modelling the domain, my first version of the applicaton simply presents the &quot;add a new wine&quot; screen.  This will be the screen I spend the most time in, and it&#39;s important to make it fast and easy.</p>

<p>The Google Spreadsheet currently collects:</p>

<ul>
<li>Wine Name</li>
<li>Vineyard</li>
<li>Vintage (year)</li>
<li>Varietal</li>
<li>Type (e.g. red/white)</li>
<li>Where we had</li>
<li>When we had</li>
<li>My rating</li>
<li>Her rating</li>
<li>Tasting Notes</li>
</ul>

<p>That&#39;s obviously too much for one iphone screen, and, if I&#39;m entering something in a hurry, I might not have time to go through all that.  Further, I think adding multiple ratings makes things a bit confusing, so I focussed my screen on the identifying characteristics (name/vineyard/vintage), the rating, and the type:</p>

<p><img src="/images/wine_brain_new_wine_1.jpg" alt="First Attempt"></p>

<p>As you can see, I tried to fit the &quot;where&quot; on the bottom, as well as a &quot;enter more information&quot; button.  After loading this on the phone, it was just not working out, plus I was missing the varietal, which is fairly important (at least to me).  </p>

<p>My next attempt simply ignores the &quot;add more&quot; concept, and, by using the segmented control, I was able to fit the type into a more compact area, while including the varietal as a &quot;slot-machine&quot;/picker.</p>

<p><img src="/images/wine_brain_new_wine_2.jpg" alt="Second Attempt"></p>

<p>My plan is to load this onto the phone and try using it the next few times I&#39;m out.  I figure I can do without the tasting notes or location if it keeps the UI simple</p>

<h3>The Code</h3>

<p>Objective-C and XCode are a whole different world from Java or Ruby.  First thing that bit me is the memory management.  I was familiar
with the rules (or so I thought).  Basically, if you call a method like &quot;copyXXX&quot; or &quot;initXXX&quot; to create a new object, you must
<code>release</code> it when you are done with it.  If you get access to an object through any other means, you should <em>not</em> release it.</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">// my class has an NSArray called varietals that I&#39;m initializing here</span>
<span class="n">varietals</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSArray</span> <span class="nl">arrayWithObjects</span><span class="p">:</span>
                  <span class="s">@&quot;Barbera&quot;</span><span class="p">,</span>
                  <span class="s">@&quot;Cabernet Franc&quot;</span><span class="p">,</span>
                  <span class="c1">// snip</span>
                  <span class="s">@&quot;Zinfandel&quot;</span><span class="p">,</span>
                  <span class="s">@&quot;Other&quot;</span><span class="p">,</span>
                  <span class="nb">nil</span><span class="p">];</span></code></pre></div>

<p>Since I&#39;m <em>not</em> calling an &quot;init&quot; style method, I figured I didn&#39;t need to release it in <code>dealloc</code>. For some reason, this made me decide that I didn&#39;t need to <code>retain</code> it.  This caused my first crash and trip through the debugger to figure out what in the heck is going on.</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">// my class has an NSArray called varietals that I&#39;m initializing here</span>
<span class="n">varietals</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSArray</span> <span class="nl">arrayWithObjects</span><span class="p">:</span>
                  <span class="s">@&quot;Barbera&quot;</span><span class="p">,</span>
                  <span class="s">@&quot;Cabernet Franc&quot;</span><span class="p">,</span>
                  <span class="c1">// snip</span>
                  <span class="s">@&quot;Zinfandel&quot;</span><span class="p">,</span>
                  <span class="s">@&quot;Other&quot;</span><span class="p">,</span>
                  <span class="nb">nil</span><span class="p">]</span> <span class="k">retain</span><span class="p">];</span></code></pre></div>

<p>Since I needed <code>varietals</code> to survive the method where I was initializing it, I had to <code>retain</code> it.</p>

<h3>Other struggles</h3>

<p>Interestingly, laying out the UI and getting that hooked up isn&#39;t too bad; the thing I&#39;m having the most trouble with is figuring out what is the &quot;unsurprising&quot; way of doing things; tutorial code from books is rarely very well written; it&#39;s usually done in a certain way to make concepts clear, but I haven&#39;t yet found a definitive &quot;here&#39;s how you organize your code&quot; or &quot;iPhone best practices&quot; that seems relatively comprehensive.</p>

<p>At any rate, I figure if I can get the UX to be reasonably good, the rest should sort itself out.</p>

<p>I&#39;ll continue posting about my progress here on my blog.  If I can get the app polished and working, my girlfriend might demand and Android version.  Would be interesting to compare the two paradigms (especially since Android is all Java, which has been my bread-and-butter for many years).</p>

<p><a href="/blog/2010/06/27/iphone-app-part-2.html">Continued in Part 2</a>, <a href="/blog/2010/06/29/iphone-app-part-3.html">Part 3</a>, <a href="/blog/2010/07/08/iphone-app-part-4.html">Part 4</a>, and <a href="/blog/2010/07/18/iphone-app-part-5.html">Part 5</a></p>

  </section>
</article>
</div>

    </section>
  </main>
  <footer class="center">
    <p class="f6">
      Copyright &copy; 2006-2015, by David Bryant Copeland, All Rights Reserved
  </footer>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body></html>
